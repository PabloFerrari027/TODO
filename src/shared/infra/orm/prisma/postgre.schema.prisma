
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRESQL_DATABASE_URL")
  
}

model User {
  id                       String                 @id         
  name                     String                 
  email                    String                 @unique     
  sessions                 Session[]
  created_at               DateTime               @default(now())
  updated_at               DateTime               @updatedAt @default(now()) 

  @@map("users")
}

model Session {
  id                       String                 @id   
  validated_at             DateTime?
  closed_at                DateTime?
  user_id                  String
  user                     User                   @relation(fields: [user_id], references: [id], onDelete: Cascade)      
  code_validations         CodeValidation[]
  created_at               DateTime               @default(now())
  updated_at               DateTime               @updatedAt @default(now()) 

  @@map("sessions")
}

model CodeValidation {
  id                       String                 @id   
  value                    String
  session_id               String
  session                  Session                @relation(fields: [session_id], references: [id], onDelete: Cascade)
  used_at                  DateTime?
  created_at               DateTime               @default(now())
  updated_at               DateTime               @updatedAt @default(now()) 

  @@map("code_validations")
}

model Category {
  id                       String                 @id   
  name                     String             
  todo                     Todo[]    
  created_at               DateTime               @default(now())
  updated_at               DateTime               @updatedAt @default(now()) 

  @@map("categories")
}

model Todo {
  id                       String                 @id   
  name                     String              
  status                   String
  category_id              String
  category                 Category               @relation(fields: [category_id], references: [id], onDelete: Cascade)
  notes                    String
  created_at               DateTime               @default(now())
  updated_at               DateTime               @updatedAt @default(now()) 

  @@map("todo")
}
